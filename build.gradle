buildscript {
    repositories {
        jcenter()
    }
  
    dependencies {
        classpath 'org.ajoberstar:gradle-git:0.11.1-rc.2'
    }
}

apply plugin: 'org.ajoberstar.release-base'

import org.ajoberstar.grgit.Grgit
import org.ajoberstar.gradle.git.release.opinion.Strategies

release {
    grgit = Grgit.open(project.file('.'))
    
    def strategy = Strategies.SNAPSHOT
    
    // If tagging is disabled by default, enable it
    // strategy = strategy.copyWith(createTag: true)
    
    defaultVersionStrategy = strategy
    
    tagStrategy {
        prefixNameWithV = false
        generateMessage = { version -> "My new version $version.version" }
    }
}

task currentVersion {
    doLast {
        println "Project version: $project.version"
    }
}